syntax = "proto3";

package replica;

message DiffSource {
  string path = 1;
  bytes sig = 2;
}

message Patch { bytes delta = 1; }

message SyncMsg {
  int32 addr = 1;
  string path = 2;
}

message ReqRst { bool success = 1; }

service Rsync {
  rpc FetchPatch(DiffSource) returns (Patch);
  rpc RequestSync(SyncMsg) returns (ReqRst);
}