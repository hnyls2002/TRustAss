### 基本框架

- `tra` : 中心化的服务器，用于启动不同线程上面的replica同步服务
- `trasrv` : 不同的副本的同步服务
- 文件同步的过程：不需要经过中心化的服务器，直接在不同的副本之间进行同步

### 不同的机器模拟

- 采用不同的线程
- 由于使用的是同一台物理机的文件系统，所以以线程id作为标识，来区分不同的replica

### 通信

- 采用socket来进行通信，通过字节流的方式进行通信
- 中心服务器只用于处理一些信息的转发，不对data进行传输
- data的传输直接通过不同的replica之间进行传输，每对传输的thread之间都会建立一个socket连接
- socket连接的端口由中心服务器动态分配。

### 测试

- 中心服务器从外部读入测试点，向不同的replica发送文件的修改命令
- 由专门的协议来进行测试点的输入

### 文件监测

- rust `inotify`库

### 工作线程

- 对于每一个线程模拟出来的机器，都会对于很多个文件夹创建用户态线程，用于检测文件的改变，高效并发。

### 其他

#### 文件名的正则检查和绝对路径

- rust `regex`库
